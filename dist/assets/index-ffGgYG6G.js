var h=Object.defineProperty;var l=(o,s,e)=>s in o?h(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e;var a=(o,s,e)=>l(o,typeof s!="symbol"?s+"":s,e);import p from"phaser";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();class d{constructor(s,e,t){a(this,"sprite");a(this,"scene");a(this,"direction","right");a(this,"isJump",!1);a(this,"wasOnGround",!0);a(this,"standardOffsetX",0);a(this,"jumpVelocity",-800);this.scene=s,this.sprite=this.scene.physics.add.sprite(e,t,"jump_00"),this.sprite.setCollideWorldBounds(!0),this.sprite.setScale(.5),this.sprite.setOrigin(.5,1),this.sprite.body.setSize(this.sprite.width*.2,this.sprite.height*.78),this.sprite.body.setOffset(this.sprite.width/2,this.sprite.height*.18),this.sprite.play("idle")}static preload(s){for(let e=0;e<69;e++){const t=`idle_${e.toString().padStart(2,"0")}`;s.load.image(t,`assets/player_idle/Armature_${t}.png`)}for(let e=0;e<25;e++){const t=`run_${e.toString().padStart(2,"0")}`;s.load.image(t,`assets/player_run/Armature_${t}.png`)}for(let e=0;e<30;e++){const t=`jump_${e.toString().padStart(2,"0")}`;s.load.image(t,`assets/player_jump2/Armature_${t}.png`)}}static createAnims(s){s.anims.create({key:"idle",frames:Array.from({length:69},(e,t)=>({key:`idle_${t.toString().padStart(2,"0")}`})),frameRate:16,repeat:-1}),s.anims.create({key:"run",frames:Array.from({length:25},(e,t)=>({key:`run_${t.toString().padStart(2,"0")}`})),frameRate:32,repeat:-1}),s.anims.create({key:"jump",frames:Array.from({length:24},(e,t)=>({key:`jump_${(6+t).toString().padStart(2,"0")}`})).concat([{key:"jump_28"},{key:"jump_28"},{key:"jump_29"},{key:"jump_29"},{key:"jump_29"}]),frameRate:22,repeat:0})}update(s,e){const t=this.sprite.body.onFloor();this.direction==="right"?this.standardOffsetX=this.sprite.width/2:this.standardOffsetX=this.sprite.width/3,s.left.isDown?(this.sprite.setVelocityX(-300),this.sprite.setFlipX(!0),!this.isJump&&t&&(this.sprite.anims.play("run",!0),this.sprite.body.setOffset(this.standardOffsetX,this.sprite.height*.18)),this.direction="left"):s.right.isDown?(this.sprite.setVelocityX(300),this.sprite.setFlipX(!1),!this.isJump&&t&&(this.sprite.anims.play("run",!0),this.sprite.body.setOffset(this.standardOffsetX,this.sprite.height*.18)),this.direction="right"):(this.sprite.setVelocityX(0),!this.isJump&&t&&this.sprite.anims.play("idle",!0)),t&&!this.wasOnGround&&(this.sprite.anims.play("idle"),this.sprite.body.setOffset(this.standardOffsetX,this.sprite.height*.18),this.isJump=!1),e.isDown&&t&&!this.isJump&&(this.isJump=!0,this.sprite.setVelocityY(this.jumpVelocity),this.sprite.anims.play("jump").once("animationcomplete",()=>{this.isJump&&(this.isJump=!1,this.sprite.anims.play("idle",!0))})),this.wasOnGround=t}}class c extends p.Scene{constructor(){super({key:"MainScene"});a(this,"cursors");a(this,"spaceKey");a(this,"player")}preload(){d.preload(this),this.load.image("ground","assets/platform.png")}create(){this.cursors=this.input.keyboard.createCursorKeys(),this.spaceKey=this.input.keyboard.addKey(p.Input.Keyboard.KeyCodes.SPACE);const e=3e3,t=800;let i=this.physics.add.staticGroup();for(let r=0;r<e;r+=400)i.create(r,800,"ground").setScale(4,1).setOrigin(0,1).refreshBody();i.create(400,650,"ground").setScale(.3,.8).setOrigin(.5,1).refreshBody(),i.create(700,500,"ground").setScale(.3,.8).setOrigin(.5,1).refreshBody(),i.create(1e3,450,"ground").setScale(.2,.8).setOrigin(.5,1).refreshBody(),i.create(1300,450,"ground").setScale(.2,.8).setOrigin(.5,1).refreshBody();for(let r=1600;r<e;r+=300)i.create(r,500,"ground").setScale(.1,.8).setOrigin(.5,1).refreshBody();this.cameras.main.setBounds(0,0,e,t),this.physics.world.setBounds(0,0,e,t),d.createAnims(this),this.player=new d(this,100,750),this.physics.add.collider(this.player.sprite,i),this.cameras.main.startFollow(this.player.sprite,!0,.08,.08),this.physics.world.createDebugGraphic(),this.physics.world.defaults.debugShowBody=!0,this.physics.world.defaults.debugShowVelocity=!0,this.physics.world.drawDebug=!0}update(){this.player.update(this.cursors,this.spaceKey)}}const u={type:p.WEBGL,parent:"app",width:1280,height:800,backgroundColor:"#2d2d2d",physics:{default:"arcade",arcade:{gravity:{x:0,y:2e3},debug:!1}},scene:[c]};new p.Game(u);
